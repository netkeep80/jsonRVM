<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsonRVM: Реляционная виртуальная машина</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rm_view.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">jsonRVM
   &#160;<span id="projectnumber">2.6.0-70-g7455b25</span>
   </div>
   <div id="projectbrief">json Relations (Model) Virtual Machine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doc__r_v_m.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Реляционная виртуальная машина </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Главная функция РВМ это исполнение МО. МО это взаимосвязанное отношениями множество сущностей, где каждая сущность есть экземпляр определённого отношения между субъектом и объектом. Сущность записывается как триплет из идентификаторов: субъект, отношение, объект. Каждая сущность-триплет имеет уникальный идентификатор в адресном пространстве МО. Субъект, отношение и объект так же есть сущности выступающие в определённой роли в данном экземпляре отношения, т.е. сущности. Таким образом отношение по смыслу есть сущность, а по значению есть МО данной сущности. Исполнение МО есть выяснение отношений в экземплярах отношений т.е. в сущностях.</p>
<p>Выяснить отношение можно инстанцировав сущность в контесте исполнения РВМ. Такми образом создаётся экземпляр сущности. У РВМ каждый отдельный контекст есть экземпляр сущности, т.е. инстанцированная сущность. После инстанцирования сущности в контексте, РВМ выясняет значение экземпляра отношения, исполняя в данном контексте сущность - отношение данного экземпляра отношения.</p>
<p>РВМ исполняет ассоциативную модель данных, обратным методом. Прямой и обратный метод выполнения имеется ввиду то как производится вычисление значения логических функций в аппаратных логических схемах и в микропроцессорах. В логических схемах логические функции вычисляются методом прямого распространения логических сигналов, а в микропроцессорах логические функции вычисляются обратным методом, т.е. методом рекурсивного раскручивания логических функций.</p>
<h1><a class="anchor" id="autotoc_md51"></a>
Инициализация</h1>
<p>Алгоритм исполнения json после загрузки:</p>
<ol type="1">
<li>json после десериализации непосредственно представляет собой сегментом данных RVM</li>
<li>корневое значение json всегда есть корневая сущность загруженной Модели Отношений, которую необходимо исполнить</li>
<li>поля указывающие на субъект, отношение и объект могут либо содержать сущность по значению (типы json значений: объект, массив) либо содержать ссылки на сущность (типы json значений: строка, число) либо признак ссылки на контекстную сущность (типы json значений: null) либо значение boolean</li>
<li>Местоимения при нахождении их проекции возвращают ссылку на элементы контекста, проекции которых были найдены до вызова контроллера.</li>
</ol>
<h1><a class="anchor" id="autotoc_md52"></a>
Исполнение МО</h1>
<p>Вычисление результата исполнения экземпляра отношения происходит через интерпретацию сущности (либо исполнение её json проекции) выступающей в качестве сущности-отношения в данном экземпляре отношения. Что бы исполнить сущность, у неё должна быть проекция в язык который понимает вычислитель (РВМ), например: если используется JavaScript виртуальная машина, то у сущности должна быть проекция в JavaScript. Если у сущности нет проекции в язык понимаемый имеющимся вычислителем, то необходимо либо скомпилировать тело сущности (т.е. создать проекцию в нужный язык), либо интерпретировать экземпляр отношения которым она является. Сущность при исполнении в качестве отношения в экземпляре отношения может создать в контексте свойство с именем языка исполнителя и скомпилировать себя туда для непосредственного исполнения сейчас и/или в следующий раз.</p>
<p>Дело в том, что Модель Отношений по своей сути рекурсивна, т.е. обладает свойствами иерархичности и фрактальности. РВМ в процессе работы постоянно совершает обход этой рекурсивной структуры в 2х изремениях: в глубину и по горизонтали между ветвями:</p>
<div class="fragment"><div class="line">        R</div>
<div class="line">     S__|__O</div>
<div class="line">   O   _|_   S     Fractal</div>
<div class="line">R__|__/_|_\__|__R  Triune</div>
<div class="line">   |  \_|_/  |     Entity</div>
<div class="line">   S    |    O     </div>
<div class="line">      __|__</div>
<div class="line">     /  |  \</div>
<div class="line">    /___|___\</div>
</div><!-- fragment --><p>При исполнении МО существует два потока: иерархически вертикальный - это поток байткода json иерархически горизонтальный - это поток данных в json. Горизонтальные потоки это межслойное преобразование данных контроллерами MVC. Вертикальные потоки это потоки управления интерпретацией json-байткода контроллеров MVC виртуальной машиной.</p>
<p>Самое основное отношение это отношение "#/exec", оно исполняет сущность объекта указанного в поле "$obj" и записывает полученную проекцию в поле "\$sub" субъекта. Именно это отношение исполняется для кажого поля json объекта, когда он указан в качестве отношения сущности.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
Правила json скрипта (проекции МО в json):</h1>
<ol type="1">
<li>json представляет собой агрегат проекций сущностей т.е. иерархию МО по сущности-субъекту,</li>
<li>местоимение субъекта "\$sub" может являеться сущностью агрегатом проекции</li>
<li>запуск скрипта это вычисление проекции корневой сущности</li>
<li>внутри корневой json-сущности лежат разные проекции её свойств, либо...</li>
<li>внутри корневой json проекции лежит jsonView корневой сущности</li>
<li>у локальных не корневых проекций субъект "\$sub" равен сущности в которой они лежат</li>
<li>если в json объекте есть поле "\$rel", то значит этот объект описывает сущность МО</li>
<li>проекция состоит из проекций, т.о. получается иерархичность агрегирования</li>
</ol>
<p>Внутри сущности находится иерархия по сущности-субъекту.</p>
<p>Новые сущности могут создаваться в результате проецирования, т.е. по сути являются тоже проекциями.</p>
<h1><a class="anchor" id="autotoc_md54"></a>
Варианты взаимоотношений узлов json:</h1>
<ol type="1">
<li>Проекция в проекции</li>
<li>Сущность в сущности (в полях "\$obj", "\$rel", "\$sub")</li>
<li>Сущность в проекции (в объекте или массиве)</li>
<li>Проекция в сущности (в полях "\$obj", "\$rel", "\$sub")</li>
<li>Строковая или адресная ссылка на сущность в сущности (в полях "\$obj", "\$rel", "\$sub")</li>
</ol>
<h1><a class="anchor" id="autotoc_md55"></a>
О свойствах (атрибутах) и элементах сущности:</h1>
<p>У сущности кроме её внутренней троичной структуры есть свойства (её проекции) и элементы свойств. Элементами сущности являются разные её свойства. Элементы объекта и есть его свойства если этот объект не сущность. Свойства (properties) сущности есть элементы (elements) её представления (view). (json properties are elements of its view).</p>
<p>Сущность это то что является субъекту при наблюдении объекта, через призму их связывающего отношения. Таким образом сущьность есть результат отношения связывающего объект и субъект. Субъект вмещает в себя явление сущности объекта.</p>
<p>Результат исполнения сущности это проекция в триаде MVC, но т.к. МО это самокомпилирующийся иерархический многослойный MVC, то субъект у сущности это родительский view вмещающий проекцию данной сущности. Таким образом результат проецирования сущности сохраняется в поле "", значение которого состоит из отдельных проекций агрегируемых сущностей. Следовательно если объект json имеет признак того, что это сущность, то данный объект json не должен иметь в себе полей с текстовыми названиями, а только: "id", "\$obj", "\$rel", "\$sub", "\$its". Решением данной проблемы может быть вариант когда текстовые поля внутри объекта json будут хранить в себе кэши проекций данной сущности другими контроллерами (сущностями-отношениями), например:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   &quot;id&quot;: &quot;this entity english name&quot;,</div>
<div class="line">   &quot;RusView&quot;: &quot;русское название этой сущности&quot;,</div>
<div class="line">   &quot;jsView&quot;: &quot;this entity java script view&quot;,</div>
<div class="line">   &quot;C#view&quot;: &quot;this entity C# code view&quot;,</div>
<div class="line">   &quot;$obj&quot;: &quot;object entity model&quot;,</div>
<div class="line">   &quot;$rel&quot;: &quot;relation entity model&quot;,</div>
<div class="line">   &quot;$sub&quot;: &quot;subject entity model&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md56"></a>
Семантика значений разных типов в полях $sub, $rel, $obj json объекта описывающего сущность</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Тип значения   </th><th class="markdownTableHeadNone">Сементика значения    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Number   </td><td class="markdownTableBodyNone">непосредственное значение = число    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Boolean   </td><td class="markdownTableBodyNone">непосредственное значение = true/false    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">иерархический путь к глобальной сущности или относительно текущего контекста исполнения, если начинается с $    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Object   </td><td class="markdownTableBodyNone">json объект определяющий непосредственное значение сущности    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Array   </td><td class="markdownTableBodyNone">json массив определяющий непосредственное значение сущности    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Null   </td><td class="markdownTableBodyNone">значение по умолчанию, пустой указатель на сущность обозначающий топологическая замкнутость на текущую проекцию сущности в контексте исполнения    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Entity   </td><td class="markdownTableBodyNone">непосредственное описание другой сущности   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md57"></a>
Семантика json значений при исполнении  (json как байткод RVM):</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Тип значения   </th><th class="markdownTableHeadNone">Сементика значения    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Number   </td><td class="markdownTableBodyNone">непосредственное значение для записи в текущее значение инстанцированной сущности    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Boolean   </td><td class="markdownTableBodyNone">непосредственное значение для записи в текущее значение инстанцированной сущности    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">иерархический путь к json значению которое необходимо исполнить RVM в текущем контексте    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Object   </td><td class="markdownTableBodyNone">"Лямбда структура": множество пар "имя поля": значение поля, где: значение поля - json значение, которое необходимо исполнить RVM в текущем контексте; имя поля - иерархический путь к json значению которое необходимо вычислить. вычисление проекций множества пар должно происходить параллельно, в многопоточном режиме    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Array   </td><td class="markdownTableBodyNone">"Лямбда вектор": массив json значений, которое необходимо исполнить RVM в текущем контексте, при этом последовательно используется текущее значение инстанцированной сущности    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Null   </td><td class="markdownTableBodyNone">использование текущее значения инстанцированной сущности в качестве проекции сущности, т.е. по сути отсутствие действия над текущей проекцией в контексте исполнения    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Entity   </td><td class="markdownTableBodyNone">сущность, которую необходимо инстанцировать и исполнить её отношение в созданном контексте   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md58"></a>
Программирование на МО</h1>
<p>Контекстно зависимая проекция сущности может быть получена в результате исполнения (или вычисления) отношения "\$rel" в контексте субъекта "\$sub", объекта "\$obj". Доступ непосредственно к текущего значения проекции осуществляется через строковый адрес "$view". Сущность может использовать контекстно зависимые местоимения в своей модели, таким образом реализуется контекстная зависимость проекции сущности.</p>
<p>Аналогичное выражение на языке С++ выглядело бы следующим образом:</p>
<p>json context_entity_value; context_entity_value = $sub-&gt;$rel( context_entity_value, $obj );</p>
<p>В отличие от обычных языков программирования, в МО стек контекстов вызовов и стэк локальных адресных пространств (локальные переменные) принципиально разделены.</p>
<p>Локальное адресное пространство при исполнении сущности-отношения указывается всегда явно, а стэк контекстов исполнения в общем случае древовидный, т.е. по сути и не является стэком, что обеспечивает лёгкое многопоточное исполнение сущностей.</p>
<p>Так же при исполнении сущности-отношения можно указать в каком контексте она будет исполняться, в текущем или родительском аргументы тоже группируются в независимый от вызова пакет, и может быть многократно использован в контексте исполнения. В обычных языках стэк контекстов (агрументы вызова, адреса возвратов из функции) объединён с локальными адресными пространствами функций, поэтому очень важно четко знать где и что записано в стэке, четко соблюдать call convention что бы случайно не использовать некую переменную или аргумент как адрес возврата.</p>
<h1><a class="anchor" id="autotoc_md59"></a>
Контекст исполнения сущности</h1>
<p>Контекст исполнения сущности необходим для её исполнения, т.е. исполнения экземпляра отношения. При исполнении МО контексты образуют собой древовидный стэк. Это достигается за счет того, что каждый контект имеет ссылку на родительский контекст.</p>
<p>Строковая адресация в будущей версии jsonRVM</p>
<p>Строка содержит в себе последовательную запись инструкций по перемещению указателя сущности в МО. По умолчанию указатель установлен на текущую проекцию сущности. Путь сущности — это набор действий пути. Действия пути могут содержать следующие элементы и операторы.</p>
<p>Знак доллара ($) указывает на смену контекстного адресного пространства. После него должно следовать имя контекста.</p>
<p>Имена ключей. Например, $.name или $."first name". Если имя ключа начинается со знака доллара или содержит специальные символы, например пробелы, заключите его в кавычки. Элементы массива. Например, $.product.3 . Массивы отсчитываются от нуля. Оператор "точка" (.) указывает на свойство сущности. Например, в $.people.1.surname surname является дочерним элементом people.</p>
<p>"\$ent" - контекстная сущность, примеры: "\$ent.\$obj", "\$ent.some_flag" "\$sub" - контекстный субъект , примеры: "\$sub.some_attribue", "\$sub.43" "\$obj" - контекстный объект, примеры: "\$obj.arg1", "\$obj.1" "\$rel" - (по умолчанию) локальное адресное пространство , т.е. текущее значение проекции сущности, примеры: "\$rel.local_var", "\$rel.353"</p>
<p>"\$\$ent" - родительская контекстная сущность, примеры: "\$\$ent.\$obj", "\$\$ent.some_flag" "\$\$sub" - родительская контекстный субъект , примеры: "\$\$sub.some_attribue", "\$\$sub.43" "\$\$obj" - родительская контекстный объект, примеры: "\$\$obj.arg1", "\$\$obj.1" "\$\$view" - родительское локальное адресное пространство, т.е. текущее значение проекции сущности, примеры: "\$\$view.local_var", "\$\$view.353"</p>
<h1><a class="anchor" id="autotoc_md60"></a>
Стэк</h1>
<p>Стэк исполнения МО это древовидный стэк контекстов исполнения - экземпляров сущностей.</p>
<h1><a class="anchor" id="autotoc_md61"></a>
Аналогия исполнения</h1>
<p>Mapping OOP to EOP: </p><div class="fragment"><div class="line">(&amp;result ? result : *this) = this-&gt;class::method( &amp;args ? args : *this );</div>
<div class="line">-------------------------------------------------------------------------</div>
<div class="line">                                     ||</div>
<div class="line">                                     ||</div>
<div class="line">                                     ||</div>
<div class="line">                                    \||/</div>
<div class="line">                                     \/</div>
<div class="line">-------------------------------------------------------------------------</div>
<div class="line">(&amp;$.sub ? $.sub : $.rel) = $.rel-&gt;$.ent::$.rel( &amp;$.obj ? $.obj : $.rel );</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
