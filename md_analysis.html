<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsonRVM: Анализ проекта jsonRVM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="rm_view.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">jsonRVM
   </div>
   <div id="projectbrief">json Relations (Model) Virtual Machine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_analysis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Анализ проекта jsonRVM</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md181"></a> </p>
<h1><a class="anchor" id="autotoc_md182"></a>
Обзор</h1>
<p>jsonRVM (json Relations Model Virtual Machine) — это виртуальная машина для исполнения программ, написанных на декларативном языке "Модель Отношений" (Relations Model, RM). Программы представляются в формате JSON и интерпретируются как байткод. Проект реализован на C++17 и предоставляет уникальный подход к метапрограммированию через сущностно-ориентированную парадигму.</p>
<p><b>Версия:</b> 3.0.0 <b>Лицензия:</b> MIT <b>Автор:</b> Вертушкин Роман Павлович (2016-2021)</p>
<hr  />
<h1><a class="anchor" id="autotoc_md184"></a>
Сильные стороны</h1>
<h2><a class="anchor" id="autotoc_md185"></a>
1. Архитектурные преимущества</h2>
<h3><a class="anchor" id="autotoc_md186"></a>
1.1. Декларативный подход</h3>
<ul>
<li>Программы описывают <em>что</em> должно быть сделано, а не <em>как</em></li>
<li>JSON-представление обеспечивает универсальность и читаемость</li>
<li>Гомоиконичность: код и данные имеют одинаковую структуру</li>
</ul>
<h3><a class="anchor" id="autotoc_md187"></a>
1.2. Модель триединой сущности</h3>
<ul>
<li>Уникальная концепция: каждая сущность определяется триплетом (субъект, отношение, объект)</li>
<li>Поддержка MVC-паттерна на уровне языка: Model ($obj), View ($sub), Controller ($rel)</li>
<li>Рекурсивная и фрактальная природа модели позволяет описывать сложные иерархические системы</li>
</ul>
<h3><a class="anchor" id="autotoc_md188"></a>
1.3. Встроенный параллелизм</h3>
<ul>
<li>Автоматическое распараллеливание: объекты JSON исполняют ключи параллельно (<code>std::execution::par</code>)</li>
<li>Массивы обеспечивают последовательное выполнение</li>
<li>Потокобезопасность через мьютексы (<code>std::mutex</code>, <code>std::lock_guard</code>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md189"></a>
1.4. Расширяемость</h3>
<ul>
<li>Система плагинов через динамические библиотеки (DLL)</li>
<li>Функция <code>import_relations_model_to</code> для регистрации словарей отношений</li>
<li>Абстракция базы данных через <code>database_api</code> интерфейс</li>
</ul>
<h2><a class="anchor" id="autotoc_md190"></a>
2. Функциональные преимущества</h2>
<h3><a class="anchor" id="autotoc_md191"></a>
2.1. Богатый базовый словарь</h3>
<p>Реализовано более 60 базовых операций:</p><ul>
<li><b>Математика:</b> <code>+</code>, <code>-</code>, <code>*</code>, <code>:</code>, <code>pow</code>, <code>sqrt</code>, <code>sum</code></li>
<li><b>Логика:</b> <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&amp;&amp;</code>, <code>^</code> (XOR)</li>
<li><b>Строки:</b> <code>string/=</code>, <code>string/+=</code>, <code>string/find</code>, <code>string/split</code>, <code>string/join</code></li>
<li><b>Управление:</b> <code>if_rel_then_obj_else_sub</code>, <code>then</code>, <code>else</code>, <code>while</code>, <code>switch/*</code></li>
<li><b>Данные:</b> <code>where</code>, <code>union</code>, <code>size</code>, <code>get</code>, <code>set</code>, <code>erase</code>, <code>foreachobj</code>, <code>foreachsub</code></li>
<li><b>Типы:</b> <code>is_array</code>, <code>is_string</code>, <code>is_number</code>, <code>is_null</code>, и др.</li>
<li><b>Генерация:</b> <code>xml</code>, <code>html</code>, <code>tag</code> для создания разметки</li>
<li><b>Время:</b> <code>steady_clock/milliseconds</code>, <code>steady_clock/seconds</code>, и др.</li>
</ul>
<h3><a class="anchor" id="autotoc_md192"></a>
2.2. Гибкая адресация</h3>
<ul>
<li>Абсолютная адресация: <code>/entity/property/subproperty</code></li>
<li>Относительная контекстная адресация: <code>$ent</code>, <code>$obj</code>, <code>$sub</code>, <code>$rel</code></li>
<li>Многоуровневая контекстная адресация: <code>$$ent</code>, <code>$$$obj</code>, <code>$$$$rel</code> (до 4 уровней вложенности)</li>
<li>Ссылки через <code>$ref</code> для динамического разрешения</li>
</ul>
<h3><a class="anchor" id="autotoc_md193"></a>
2.3. Обработка исключений</h3>
<ul>
<li>JSON-исключения с полным контекстом ошибки</li>
<li>Операции <code>throw</code> и <code>catch</code> на уровне языка</li>
<li>Детальная трассировка через <code>vm_ctx::throw_json()</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md194"></a>
3. Технические преимущества</h2>
<h3><a class="anchor" id="autotoc_md195"></a>
3.1. Качество кода</h3>
<ul>
<li>Подробная документация в формате Doxygen</li>
<li>Использование современного C++17 (execution policies, string literals)</li>
<li>Автоматическая генерация документации через GitHub Actions</li>
</ul>
<h3><a class="anchor" id="autotoc_md196"></a>
3.2. Зависимости</h3>
<ul>
<li>nlohmann/json — надёжная библиотека для работы с JSON</li>
<li>doctest — быстрый фреймворк для тестирования</li>
<li>cpp-httplib — HTTP/HTTPS клиент/сервер</li>
<li>xml2json — конвертация XML в JSON</li>
</ul>
<h3><a class="anchor" id="autotoc_md197"></a>
3.3. Тестирование</h3>
<ul>
<li>Unit-тесты на doctest</li>
<li>Тестовые JSON-сценарии для различных функций</li>
<li>Проверка адресации, фильтрации, производительности</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md199"></a>
Слабые стороны</h1>
<h2><a class="anchor" id="autotoc_md200"></a>
1. Архитектурные ограничения</h2>
<h3><a class="anchor" id="autotoc_md201"></a>
1.1. Платформозависимость</h3>
<ul>
<li><b>Критично:</b> DLL-загрузка работает только на Windows (<code>windows.h</code>, <code>LoadLibrary</code>, <code>HMODULE</code>)</li>
<li>Отсутствует кроссплатформенная абстракция для динамической загрузки</li>
<li>Использование CP1251 для имён файлов — ограничение для не-Windows систем</li>
</ul>
<h3><a class="anchor" id="autotoc_md202"></a>
1.2. Ограниченная глубина контекста</h3>
<ul>
<li>Жёстко закодированы только 4 уровня контекстной адресации (<code>$</code>, <code>$$</code>, <code>$$$</code>, <code>$$$$</code>)</li>
<li>Расширение требует модификации исходного кода <a class="el" href="vm_8rm_8h.html">vm.rm.h</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md203"></a>
1.3. Отсутствие оптимизаций</h3>
<ul>
<li>Нет JIT-компиляции или кэширования байткода</li>
<li>Каждое исполнение проходит полную интерпретацию</li>
<li>Отсутствует ленивая вычисление (lazy evaluation)</li>
</ul>
<h2><a class="anchor" id="autotoc_md204"></a>
2. Функциональные ограничения</h2>
<h3><a class="anchor" id="autotoc_md205"></a>
2.1. Неполная реализация database_api</h3>
<ul>
<li><code>query_entity</code> — заглушка (только вывод в консоль)</li>
<li>Нет поддержки транзакций</li>
<li>Нет механизма миграций или версионирования схемы</li>
</ul>
<h3><a class="anchor" id="autotoc_md206"></a>
2.2. Ограниченная работа со строками</h3>
<ul>
<li>Нет регулярных выражений</li>
<li>Нет форматирования строк (printf-style)</li>
<li>Отсутствует работа с Unicode (только CP1251 ↔ UTF-8)</li>
</ul>
<h3><a class="anchor" id="autotoc_md207"></a>
2.3. Отсутствующие возможности</h3>
<ul>
<li>Нет модульной системы (namespace/module)</li>
<li>Нет механизма импорта JSON-файлов как модулей</li>
<li>Отсутствует отладчик или пошаговое исполнение</li>
<li>Нет профилировщика производительности</li>
</ul>
<h2><a class="anchor" id="autotoc_md208"></a>
3. Технические проблемы</h2>
<h3><a class="anchor" id="autotoc_md209"></a>
3.1. Код</h3>
<ul>
<li>Смешение стилей: MSVC-специфичный синтаксис (<code>for each</code>)</li>
<li>Устаревшие конструкции (<code>char*</code> вместо <code>std::string_view</code>)</li>
<li>Отсутствует форматирование кода (clang-format)</li>
<li>Некоторые функции не имеют описания (<code>""s</code> в <code>add_base_entity</code>)</li>
</ul>
<h3><a class="anchor" id="autotoc_md210"></a>
3.2. Сборка</h3>
<ul>
<li>Нет CI/CD для тестирования (только Doxygen публикация)</li>
<li>CMakeLists.txt — опечатка: <code>ENABLE_TEST</code> vs <code>ENABLE_TESTS</code></li>
<li>Отсутствует vcpkg/conan интеграция для зависимостей</li>
</ul>
<h3><a class="anchor" id="autotoc_md211"></a>
3.3. Документация</h3>
<ul>
<li><a class="el" href="_r_e_a_d_m_e_8md.html">README.md</a> содержит устаревшие badge-ссылки (workflow/status)</li>
<li>Часть документации только на русском языке</li>
<li>Нет примеров интеграции с внешними проектами</li>
</ul>
<h2><a class="anchor" id="autotoc_md212"></a>
4. Безопасность</h2>
<h3><a class="anchor" id="autotoc_md213"></a>
4.1. Потенциальные уязвимости</h3>
<ul>
<li>Нет санитизации путей при загрузке файлов</li>
<li>DLL-загрузка без проверки подписи</li>
<li>Возможен DoS через глубокую рекурсию JSON</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md215"></a>
Статистика проекта</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Метрика   </th><th class="markdownTableHeadNone">Значение    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Строк кода (headers)   </td><td class="markdownTableBodyNone">~2500    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Базовых операций   </td><td class="markdownTableBodyNone">60+    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Тестовых сценариев   </td><td class="markdownTableBodyNone">15+    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Документация (doc/)   </td><td class="markdownTableBodyNone">10 файлов    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Третьесторонние библиотеки   </td><td class="markdownTableBodyNone">5   </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="autotoc_md217"></a>
Заключение</h1>
<p>jsonRVM представляет собой инновационный проект с уникальной концептуальной основой — моделью отношений (Relations Model). Сильные стороны проекта включают декларативный подход, встроенный параллелизм и богатый базовый словарь операций. Основные слабости связаны с платформозависимостью (Windows-only для DLL), отсутствием кроссплатформенной поддержки и некоторыми техническими долгами в коде.</p>
<p>Проект имеет значительный потенциал для применения в области:</p><ul>
<li>Конфигурационных систем</li>
<li>DSL для бизнес-логики</li>
<li>Моделирования иерархических систем</li>
<li>Прототипирования и метапрограммирования</li>
</ul>
<p>Для дальнейшего развития рекомендуется сфокусироваться на кроссплатформенности, улучшении производительности и расширении экосистемы примеров и документации. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
